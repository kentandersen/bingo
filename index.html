<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entur bingo</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            background-color: #656782;
            display: grid;
            min-height: 100vh;
            margin: 0;
            padding: 0 1rem;
        }

        main {
            background: #181c56;
            padding: 2rem 0.5rem 4rem;
            box-shadow: 0 0 1.5rem 0.375rem rgba(24, 28, 86, 0.75);
            max-width: 35rem;
            border-radius: 0.75rem;
            margin: auto;
        }

        .logo {
            width: 60%;
            margin: 0 auto;
            display: block;
            margin-bottom: 2rem;
        }
        
        #bord {
            table-layout: fixed;
            border-collapse: separate;
            width: 100%;
        }
        
        #bord td {
            width: 25%;
            text-align: center;
        }

        .square {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            display: inline-block;
            border: 0;
            border-radius: 1rem;
            background-color: #ffffff;
            width: 4rem;
            height: 4rem;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            transition: box-shadow 0.3s,
                        background-color 0.3s;
        }

        .square:focus {
            outline: none;
        }

        .square:checked {
            box-shadow: inset 0 0 0 0.3rem #ff5959;
        }

        @media (min-width: 34em) {
            main {
                padding: 2rem 2rem 4rem;
            }

            .square {
                width: 5rem;
                height: 5rem;
            }
        }
    </style>
</head>
<body>
    <main>
        <svg viewBox="0 0 62 19" xmlns="http://www.w3.org/2000/svg" aria-label="Entur logo" class="logo">
            <path d="M0 0v13.006h9.392v-2.203H2.439V7.658h6.169V5.455H2.439V2.203h6.953V0z" fill="#ffffff"></path><path d="M0 18h22.983v-2H0z" fill="#ff5959"></path>
            <path d="M20.543 0v7.871L12.163 0H11.9v13.006h2.44V5.277l8.38 7.73h.262V0zM35.467 7.657h-3.642V18.46h-2.439V7.657h-3.66V5.454h9.74z" fill="#ffffff"></path>
            <path d="M42.872 18.691c-.825 0-1.574-.13-2.248-.39a4.929 4.929 0 0 1-1.725-1.102 4.877 4.877 0 0 1-1.106-1.724c-.261-.675-.392-1.427-.392-2.256V5.454h2.44v7.765c0 .651.104 1.19.313 1.617.209.426.467.764.775 1.012.308.25.64.421.994.516.354.095.67.142.95.142.278 0 .594-.047.949-.142.354-.095.685-.267.993-.516.308-.248.566-.586.775-1.012.21-.427.314-.966.314-1.617V5.454h2.44v7.765c0 .83-.128 1.581-.384 2.256a4.787 4.787 0 0 1-1.098 1.724 4.934 4.934 0 0 1-1.725 1.101c-.673.26-1.428.391-2.265.391M53.57 12.153h2.78c.509 0 .928-.065 1.258-.196.33-.13.59-.302.782-.515.191-.213.321-.453.39-.72.07-.266.105-.535.105-.808 0-.32-.05-.616-.148-.888a1.906 1.906 0 0 0-.451-.711 2.16 2.16 0 0 0-.782-.48c-.319-.118-.703-.178-1.155-.178H53.57v4.496zm0 2.167v4.14h-2.439V5.454h5.795c.652 0 1.248.11 1.789.329.541.22 1.004.527 1.387.924.384.397.684.87.9 1.421.214.551.322 1.152.322 1.804 0 .486-.064.956-.192 1.412a4.795 4.795 0 0 1-.532 1.235 3.718 3.718 0 0 1-.838.95 2.952 2.952 0 0 1-1.09.56l3.175 4.371h-2.91l-2.952-4.14H53.57z" fill="#ffffff"></path>
        </svg>

        <table id="bord">
            <tr>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
            </tr>
            <tr>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
            </tr>
            <tr>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
            </tr>
            <tr>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
            </tr>
            <tr>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
                <td><input class="square" type="checkbox"/></td>
            </tr>
        </table>
    </main>

    <script type="module">
        import values, { getRandomValue } from './values.js'

        function setItem(key, value) {
            try {
                sessionStorage.setItem(key, JSON.stringify(value))
            } catch (error) {
                console.error('Gikk i dass git..', error)
            }

            return value
        }
        
        function getItem(key) {
            try {
                const item = sessionStorage.getItem(key)
                if (item) return JSON.parse(item)
            } catch (error) {
                console.error('Gikk i dass git..', error)
            }
        }

        function generateBord(width = 5, height = 5) {
            return Array(width * height).fill().map(() => getRandomValue())
        }
        
        function generateChecks(width = 5, height = 5) {
            return Array(width * height).fill().map(() => false)
        }

        function getCoords(el) {
            const [, row, column] = /(\d)-(\d)$/.exec(el.id) || []
            return [Number(row), Number(column)]
        }

        function getChecks() {
            return getItem('check') || setItem('check', generateChecks())
        }

        function getBord() {
            return getItem('bord') || setItem('bord', generateBord())
        }

        function hydrateElement(el, { name, thumb }, checked) {
            el.style.backgroundImage = `url('${thumb}')`
            el.checked = checked
            el.title = name
        }

        function hydrate(bord, checks) {
            const table = document.getElementById('bord')
            const squares = table.querySelectorAll('input.square')

            Array.from(squares).forEach((el, index) => {
                const value = bord[index]
                const checked = checks[index]

                hydrateElement(el, value, checked)
            })

            table.addEventListener('change', event => {
                const index = Array.from(squares).indexOf(event.target)
                checks[index] = event.target.checked
                setItem('check', checks)
            })
        }

        hydrate(getBord(), getChecks())
    </script>
</body>
</html>
